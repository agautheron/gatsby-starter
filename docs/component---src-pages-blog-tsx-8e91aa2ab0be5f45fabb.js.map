{"version":3,"sources":["webpack:///./src/components/BlogPagination/BlogPagination.tsx","webpack:///./src/pages/blog.tsx"],"names":["props","pageCount","activeItem","pathname","startsWith","split","Menu","pagination","times","index","pageIndex","toString","rangeStep","isInRange","isLastPage","Item","key","style","cursor","as","Link","to","name","active","disabled","withLayout","data","tags","group","posts","edges","location","Math","ceil","totalCount","Posts","Container","map","node","frontmatter","timeToRead","slug","fields","excerpt","avatar","author","children","cover","src","withPrefix","get","srcSet","Array","element","join","Comment","Group","Avatar","fixed","Content","Author","fontWeight","id","Metadata","margin","updatedDate","Card","Description","fluid","image","header","title","BlogTitle","Segment","vertical","Grid","padded","justifyContent","maxWidth","textAlign","BlogPagination","pageQuery"],"mappings":"8NAWe,WAACA,GACd,GAAwB,IAApBA,EAAMC,UAAmB,OAAO,KACpC,IAAMC,EAAaF,EAAMG,SAASC,WAAW,eACzCJ,EAAMG,SAASE,MAAM,KAAK,GAC1B,IAEJ,OACE,gBAACC,EAAA,EAAD,CAAMC,YAAU,GACbC,gBAAMR,EAAMC,WAAW,SAACQ,GACvB,IAAMC,GAAaD,EAAQ,GAAGE,WAExBC,EAAYZ,EAAMC,UAAY,GAAK,EAAI,EACvCY,GAAcH,EAAYE,GAAaV,IAAeQ,EAAYE,GAAaV,EAC/EY,GAAeJ,IAAcV,EAAMC,UAEzC,OAAIY,GADgC,IAAdH,GACUI,EAE5B,gBAACR,EAAA,EAAKS,KAAN,CACEC,IAAKN,EACLO,MAAO,CAAEC,OAAQ,WACjBC,GAAInB,EAAMoB,KACVC,GAAE,cAAgBX,EAAhB,IACFY,KAAMZ,EACNa,OAAQrB,IAAeQ,KAIlBA,GAAcV,EAAMC,UAAY,GAAoB,IAAdS,EAC3C,gBAACJ,EAAA,EAAKS,KAAN,CAAWC,IAAKN,EAAWc,UAAQ,GAAnC,OACA,U,mDC+DCC,uBAjFF,SAACzB,GACCA,EAAM0B,KAAKC,KAAKC,MAA7B,IACMC,EAAQ7B,EAAM0B,KAAKG,MAAMC,MACvB3B,EAAaH,EAAM+B,SAAnB5B,SACFF,EAAY+B,KAAKC,KAAKjC,EAAM0B,KAAKG,MAAMK,WAAa,KAGpDC,EACJ,gBAACC,EAAA,EAAD,KACGP,EAAMQ,KAAI,YAAsC,IAAnCC,EAAmC,EAAnCA,KACJC,EAAuDD,EAAvDC,YAAaC,EAA0CF,EAA1CE,WAAsBC,EAAoBH,EAA9BI,OAAUD,KAAQE,EAAYL,EAAZK,QAC7CC,EAASL,EAAYM,OAAOD,OAAOE,SAAS,GAC5CC,EAAQ,CACZC,IAAKC,qBAAWC,cAAIX,EAAa,yBAA0B,IAAIS,KAC/DG,OAAQC,MAAMF,cAAIX,EAAY,yBAAyB,IAAIY,OAAO9C,MAAM,MAAMgC,KAAI,SAACgB,GAAD,OAAWJ,qBAAWI,MAAUC,KAAK,QAGvH,gBAACC,EAAA,EAAQC,MAAT,KACE,gBAACD,EAAA,EAAD,KACE,gBAACA,EAAA,EAAQE,OAAT,CACET,IAAKJ,EAAOc,MAAMV,IAClBG,OAAQP,EAAOc,MAAMP,SAEvB,gBAACI,EAAA,EAAQI,QAAT,KACE,gBAACJ,EAAA,EAAQK,OAAT,CAAgB3C,MAAO,CAAE4C,WAAY,MAClCtB,EAAYM,OAAOiB,IAEtB,gBAACP,EAAA,EAAQQ,SAAT,CAAkB9C,MAAO,CAAE+C,OAAQ,IAChCzB,EAAY0B,YADf,MAC+BzB,EAD/B,gBASN,gBAAC0B,EAAA,EAAKC,YAAN,KACGxB,EACD,2BACA,gBAAC,OAAD,CAAMtB,GAAIoB,GAAV,eAIJ,OACE,gBAACyB,EAAA,EAAD,CACE/C,GAAIC,OACJC,GAAIoB,EACJ2B,OAAK,EACLC,MAAOtB,EACPuB,OAAQ/B,EAAYgC,YAS9B,OACE,gBAACnC,EAAA,EAAD,KAEE,gBAACoC,EAAA,EAAD,MAGA,gBAACC,EAAA,EAAD,CAASC,UAAQ,GACf,gBAACC,EAAA,EAAD,CAAMC,QAAM,EAAC3D,MAAO,CAAE4D,eAAgB,iBACpC,uBAAK5D,MAAO,CAAE6D,SAAU,MACrB3C,EACD,gBAACsC,EAAA,EAAD,CAASC,UAAQ,EAACK,UAAU,UAC1B,gBAACC,EAAD,CAAgB5D,KAAMA,OAAMjB,SAAUA,EAAUF,UAAWA,YArEzE,IAmFagF,EAAY","file":"component---src-pages-blog-tsx-8e91aa2ab0be5f45fabb.js","sourcesContent":["import * as React from \"react\";\r\nimport { GatsbyLinkProps } from \"gatsby-link\";\r\nimport { Menu } from \"semantic-ui-react\";\r\nimport { times } from \"lodash\";\r\n\r\ninterface BlogPaginationProps extends React.HTMLProps<HTMLDivElement> {\r\n  pathname: string;\r\n  Link: React.ComponentClass<GatsbyLinkProps<any>>;\r\n  pageCount: number;\r\n}\r\n\r\nexport default (props: BlogPaginationProps) => {\r\n  if (props.pageCount === 1) { return null; }\r\n  const activeItem = props.pathname.startsWith(\"/blog/page/\")\r\n    ? props.pathname.split(\"/\")[3]\r\n    : \"1\";\r\n\r\n  return (\r\n    <Menu pagination>\r\n      {times(props.pageCount, (index) => {\r\n        const pageIndex = (index + 1).toString();\r\n\r\n        const rangeStep = props.pageCount < 10 ? 5 : 3;\r\n        const isInRange = (+pageIndex - rangeStep < +activeItem && +pageIndex + rangeStep > +activeItem);\r\n        const isLastPage = (+pageIndex === props.pageCount);\r\n        const isFirstPage = (+pageIndex === 1);\r\n        if (isInRange || isFirstPage || isLastPage) {\r\n          return (\r\n            <Menu.Item\r\n              key={pageIndex}\r\n              style={{ cursor: \"pointer\" }}\r\n              as={props.Link}\r\n              to={`/blog/page/${pageIndex}/`}\r\n              name={pageIndex}\r\n              active={activeItem === pageIndex}\r\n            />\r\n          );\r\n        } else {\r\n          return (+pageIndex === props.pageCount - 1 || +pageIndex === 2)\r\n            ? <Menu.Item key={pageIndex} disabled>...</Menu.Item>\r\n            : null;\r\n        }\r\n      })}\r\n    </Menu>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { Link } from \"gatsby\";\r\nimport { StaticQuery, graphql, withPrefix } from \"gatsby\";\r\nimport { Header, Grid, Card, List, Container, Feed, Segment, Comment } from \"semantic-ui-react\";\r\nimport { MarkdownRemarkConnection, ImageSharp } from \"../graphql-types\";\r\nimport BlogTitle from \"../components/BlogTitle\";\r\nimport TagsCard from \"../components/TagsCard/TagsCard\";\r\nimport BlogPagination from \"../components/BlogPagination/BlogPagination\";\r\nimport { get } from \"lodash\";\r\nimport {withLayout, LayoutProps} from \"../components/Layout\";\r\nimport { MarkdownRemark } from \"../graphql-types\";\r\n\r\ninterface BlogProps extends LayoutProps {\r\n  data: {\r\n    tags: MarkdownRemarkConnection;\r\n    posts: MarkdownRemarkConnection;\r\n  };\r\n  pageContext: {\r\n    tag?: string; // only set into `templates/tags-pages.tsx`\r\n  };\r\n}\r\n\r\nconst Blog = (props: BlogProps) => {\r\n  const tags = props.data.tags.group;\r\n  const posts = props.data.posts.edges;\r\n  const { pathname } = props.location;\r\n  const pageCount = Math.ceil(props.data.posts.totalCount / 100);\r\n\r\n  // TODO export posts in a proper component\r\n  const Posts = (\r\n    <Container>\r\n      {posts.map(({ node }: {node: MarkdownRemark}) => {\r\n        const { frontmatter, timeToRead, fields: { slug }, excerpt } = node;\r\n        const avatar = frontmatter.author.avatar.children[0] as ImageSharp;\r\n        const cover = {\r\n          src: withPrefix(get(frontmatter, \"image.children.0.fixed\", {}).src),\r\n          srcSet: Array(get(frontmatter,\"image.children.0.fixed\",{}).srcSet.split(\"\\n\").map((element)=>withPrefix(element)).join('\\n'))\r\n        };\r\n        const extra = (\r\n          <Comment.Group>\r\n            <Comment>\r\n              <Comment.Avatar\r\n                src={avatar.fixed.src}\r\n                srcSet={avatar.fixed.srcSet}\r\n              />\r\n              <Comment.Content>\r\n                <Comment.Author style={{ fontWeight: 400 }}>\r\n                  {frontmatter.author.id}\r\n                </Comment.Author>\r\n                <Comment.Metadata style={{ margin: 0 }}>\r\n                  {frontmatter.updatedDate} - {timeToRead} min read\r\n              </Comment.Metadata>\r\n              </Comment.Content>\r\n            </Comment>\r\n          </Comment.Group>\r\n        );\r\n\r\n        const description = (\r\n          <Card.Description>\r\n            {excerpt}\r\n            <br />\r\n            <Link to={slug}>Read moreâ€¦</Link>\r\n          </Card.Description>\r\n        );\r\n\r\n        return (\r\n          <Card\r\n            as={Link}\r\n            to={slug}\r\n            fluid\r\n            image={cover}\r\n            header={frontmatter.title}\r\n        /*    extra={extra}\r\n            description={description} */\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n\r\n  return (\r\n    <Container>\r\n      {/* Title */}\r\n      <BlogTitle />\r\n\r\n      {/* Content */}\r\n      <Segment vertical>\r\n        <Grid padded style={{ justifyContent: \"space-around\" }}>\r\n          <div style={{ maxWidth: 600 }}>\r\n            {Posts}\r\n            <Segment vertical textAlign=\"center\">\r\n              <BlogPagination Link={Link} pathname={pathname} pageCount={pageCount} />\r\n            </Segment>\r\n          </div>\r\n         {/* <div>\r\n            <TagsCard Link={Link} tags={tags} tag={props.pageContext.tag} />\r\n         </div> */}\r\n        </Grid>\r\n      </Segment>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default withLayout(Blog);\r\n\r\nexport const pageQuery = graphql`\r\nquery Blog {\r\n  # Get tags\r\n  tags: allMarkdownRemark(filter: {frontmatter: {draft: {ne: true}}}) {\r\n    group(field: frontmatter___tags) {\r\n      fieldValue\r\n      totalCount\r\n    }\r\n  }\r\n\r\n  # Get posts\r\n  posts: allMarkdownRemark(\r\n    sort: { order: DESC, fields: [frontmatter___updatedDate] },\r\n    filter: {\r\n      frontmatter: { draft: { ne: true } }\r\n    },\r\n    limit: 100\r\n  ) {\r\n    totalCount\r\n    edges {\r\n      node {\r\n        excerpt\r\n        timeToRead\r\n        fields {\r\n          slug\r\n        }\r\n        frontmatter {\r\n          title\r\n          category\r\n          header\r\n          updatedDate(formatString: \"DD MMMM, YYYY\")\r\n          image {\r\n          \tchildren {\r\n              ... on ImageSharp {\r\n                fixed(width: 300, height: 300) {\r\n                  src\r\n                  srcSet\r\n                }\r\n              }\r\n            }\r\n          }\r\n          author {\r\n            id\r\n            avatar {\r\n              children {\r\n                ... on ImageSharp {\r\n                  fixed(width: 35, height: 35) {\r\n                    src\r\n                    srcSet\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n`;"],"sourceRoot":""}