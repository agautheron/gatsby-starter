{"version":3,"sources":["webpack:///./src/templates/blog-post.tsx"],"names":["withLayout","props","data","post","frontmatter","html","tags","timeToRead","author","avatar","children","map","tag","key","recents","edges","node","recentAvatar","recentCover","get","Group","Avatar","src","fixed","srcSet","Content","Author","style","fontWeight","id","Metadata","margin","category","fields","slug","paddingBottom","as","Link","to","image","header","title","cover","href","name","vertical","border","Subheader","fluid","dangerouslySetInnerHTML","__html","padded","centered","pageQuery"],"mappings":"wRAsHeA,uBApGM,SAACC,GAAyB,MACHA,EAAMC,KAAKC,KAA7CC,EADqC,EACrCA,YAAaC,EADwB,EACxBA,KAGfC,GAJuC,EAClBC,WACZH,EAAYI,OAAOC,OAAOC,SAAS,GAErCT,EAAMC,KAAKC,KAAKC,YAAYE,KACtCK,KAAI,SAACC,GAAD,OAAS,gBAAC,IAAD,CAAOC,IAAKD,GAAMA,OAE5BE,EAAUb,EAAMC,KAAKY,QAAQC,MAC9BJ,KAAI,YAAc,IAAXK,EAAW,EAAXA,KACFC,EAAeD,EAAKZ,YAAYI,OAAOC,OAAOC,SAAS,GACvDQ,EAAcC,cAAIH,EAAM,qCAAsC,IAElE,gBAAC,IAAQI,MAAT,KACE,gBAAC,IAAD,KACE,gBAAC,IAAQC,OAAT,CACEC,IAAKL,EAAaM,MAAMD,IACxBE,OAAQP,EAAaM,MAAMC,SAE7B,gBAAC,IAAQC,QAAT,KACE,gBAAC,IAAQC,OAAT,CAAgBC,MAAO,CAAEC,WAAY,MAClCZ,EAAKZ,YAAYI,OAAOqB,IAE3B,gBAAC,IAAQC,SAAT,CAAkBH,MAAO,CAAEI,OAAQ,IAChCf,EAAKT,WADR,gBAOR,GAAIN,EAAMC,KAAKC,KAAKC,YAAY4B,UAAYhB,EAAKZ,YAAY4B,SAC7D,OACE,uBAAKnB,IAAKG,EAAKiB,OAAOC,KAAMP,MAAO,CAAEQ,cAAe,QAClD,gBAAC,IAAD,CAAMC,GAAIC,OACRC,GAAItB,EAAKiB,OAAOC,KAChBK,MAAOrB,EACPsB,OAAQxB,EAAKZ,YAAYqC,YAQ7BC,EAAQvB,cAAIf,EAAa,yBAA0B,IACzD,OACE,gBAAC,IAAD,KACE,qBACEuC,KAAK,6BACL,gBAAC,IAAD,CAAMC,KAAK,eAFb,WAGA,gBAAC,IAAD,MACA,gBAAC,IAAD,CAASC,UAAQ,EAAClB,MAAO,CAAEmB,OAAQ,SAejC,gBAAC,IAAD,CAAQV,GAAG,MAAMhC,EAAYqC,MAC7B,gBAAC,IAAOM,UAAR,KACC3C,EAAYoC,UAIf,gBAAC,IAAD,iBACME,EADN,CAEEM,OAAK,KAEP,gBAAC,IAAD,CAASH,UAAQ,EACflB,MAAO,CAAEmB,OAAQ,QACjBG,wBAAyB,CACvBC,OAAQ7C,KAGZ,gBAAC,IAAD,CAASwC,UAAQ,GACdvC,GASH,gBAAC,IAAD,CAASuC,UAAQ,GACf,gBAAC,IAAD,CAAMM,QAAM,EAACC,UAAQ,GAClBtC,QASJ,IAAMuC,EAAY","file":"component---src-templates-blog-post-tsx-fa59a7cd8192d37d856e.js","sourcesContent":["import * as React from \"react\";\r\nimport { Link, withPrefix } from \"gatsby\";\r\nimport { get } from \"lodash\";\r\nimport { Header, Container, Segment, Icon, Label, Button, Grid, Card, Image, Item, Comment } from \"semantic-ui-react\";\r\nimport { MarkdownRemark, ImageSharp, MarkdownRemarkConnection, Site } from \"../graphql-types\";\r\nimport BlogTitle from \"../components/BlogTitle\";\r\nimport { DiscussionEmbed } from \"disqus-react\";\r\nimport {withLayout, LayoutProps} from \"../components/Layout\";\r\nimport { graphql } from \"gatsby\";\r\n\r\ninterface BlogPostProps extends LayoutProps {\r\n  data: {\r\n    post: MarkdownRemark;\r\n    recents: MarkdownRemarkConnection;\r\n    site: Site\r\n  };\r\n}\r\n\r\nconst BlogPostPage = (props: BlogPostProps) => {\r\n  const { frontmatter, html, timeToRead } = props.data.post;\r\n  const avatar = frontmatter.author.avatar.children[0] as ImageSharp;\r\n\r\n  const tags = props.data.post.frontmatter.tags\r\n    .map((tag) => <Label key={tag}>{tag}</Label>);\r\n\r\n  const recents = props.data.recents.edges\r\n      .map(({ node }) => {\r\n      const recentAvatar = node.frontmatter.author.avatar.children[0] as ImageSharp;\r\n      const recentCover = get(node, \"frontmatter.image.children.0.fixed\", {});\r\n      const extra = (\r\n        <Comment.Group>\r\n          <Comment>\r\n            <Comment.Avatar\r\n              src={recentAvatar.fixed.src}\r\n              srcSet={recentAvatar.fixed.srcSet}\r\n            />\r\n            <Comment.Content>\r\n              <Comment.Author style={{ fontWeight: 400 }}>\r\n                {node.frontmatter.author.id}\r\n              </Comment.Author>\r\n              <Comment.Metadata style={{ margin: 0 }}>\r\n                {node.timeToRead} min read\r\n              </Comment.Metadata>\r\n            </Comment.Content>\r\n          </Comment>\r\n        </Comment.Group>\r\n      );\r\n      if (props.data.post.frontmatter.category == node.frontmatter.category){\r\n      return (\r\n        <div key={node.fields.slug} style={{ paddingBottom: \"1em\" }}>\r\n          <Card as={Link}\r\n            to={node.fields.slug}\r\n            image={recentCover}\r\n            header={node.frontmatter.title}\r\n           // extra={extra}\r\n          />\r\n        </div>\r\n      );\r\n      }\r\n    });\r\n\r\n  const cover = get(frontmatter, \"image.children.0.fixed\", {} );\r\n  return (\r\n    <Container>\r\n      <a\r\n        href=\"javascript:history.back()\"\r\n       ><Icon name=\"arrow left\"></Icon> Retour</a>\r\n      <BlogTitle />\r\n      <Segment vertical style={{ border: \"none\" }}>\r\n      {/*  <Item.Group>\r\n          <Item>\r\n            <Item.Image size=\"tiny\"\r\n              src={avatar.fixed.src}\r\n              srcSet={avatar.fixed.srcSet}\r\n              circular\r\n            />\r\n            <Item.Content>\r\n              <Item.Description>{frontmatter.author.id}</Item.Description>\r\n              <Item.Meta>{frontmatter.author.bio}</Item.Meta>\r\n              <Item.Extra>{frontmatter.updatedDate} - {timeToRead} min read</Item.Extra>\r\n            </Item.Content>\r\n          </Item>\r\n        </Item.Group> */}\r\n        <Header as=\"h1\">{frontmatter.title}\r\n        <Header.Subheader>\r\n        {frontmatter.header}\r\n        </Header.Subheader>\r\n        </Header>\r\n      </Segment>\r\n      <Image\r\n        {...cover}\r\n        fluid\r\n      /> \r\n      <Segment vertical\r\n        style={{ border: \"none\" }}\r\n        dangerouslySetInnerHTML={{\r\n          __html: html,\r\n        }}\r\n      />\r\n      <Segment vertical>\r\n        {tags}\r\n      </Segment>\r\n   {/*}   {props.data.site\r\n        && props.data.site.siteMetadata\r\n        && props.data.site.siteMetadata.disqus\r\n        && <Segment vertical>\r\n            <DiscussionEmbed shortname={props.data.site.siteMetadata.disqus} config={{}}/>\r\n        </Segment>\r\n      } */}\r\n      <Segment vertical>\r\n        <Grid padded centered>\r\n          {recents}\r\n        </Grid>\r\n      </Segment>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default withLayout(BlogPostPage);\r\n\r\nexport const pageQuery = graphql`\r\n  query TemplateBlogPost($slug: String!) {\r\n  site: site {\r\n    siteMetadata {\r\n        disqus\r\n    }\r\n  }\r\n  post: markdownRemark(fields: {slug: {eq: $slug}}) {\r\n    html\r\n    excerpt\r\n    timeToRead\r\n    fields {\r\n      slug\r\n    }\r\n    frontmatter {\r\n      tags\r\n      category\r\n      author {\r\n        id\r\n        bio\r\n        twitter\r\n        avatar {\r\n          children {\r\n            ... on ImageSharp {\r\n              fixed(width: 80, height: 80, quality: 100) {\r\n                src\r\n                srcSet\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      title\r\n      header\r\n      updatedDate(formatString: \"MMM D, YYYY\")\r\n      image {\r\n        children {\r\n          ... on ImageSharp {\r\n            fixed(width: 900, height: 300, quality: 100) {\r\n              src\r\n              srcSet\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  recents: allMarkdownRemark(\r\n    filter: {\r\n      fields: {slug: {ne: $slug}}\r\n      frontmatter: {draft: {ne: true}},\r\n      # fileAbsolutePath: {regex: \"/blog/\"},\r\n    },\r\n    sort: {order: DESC, fields: [frontmatter___updatedDate]},\r\n #   limit: 4\r\n  ) {\r\n    edges {\r\n      node {\r\n        fields {\r\n          slug\r\n        }\r\n        timeToRead\r\n        frontmatter {\r\n          category\r\n          header\r\n          title\r\n          image {\r\n            children {\r\n              ... on ImageSharp {\r\n                fixed(width: 300, height: 100) {\r\n                  src\r\n                  srcSet\r\n                }\r\n              }\r\n            }\r\n          }\r\n          author {\r\n            id\r\n            avatar {\r\n              children {\r\n                ... on ImageSharp {\r\n                  fixed(width: 36, height: 36) {\r\n                    src\r\n                    srcSet\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n`;\r\n"],"sourceRoot":""}